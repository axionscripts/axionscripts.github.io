<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Axion Black Market - Server Customization</title>
    <link rel="stylesheet" href="../styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Navbar will be loaded here -->
    <div id="navbar-container"></div>

    <!-- Page Header -->
    <section class="page-header">
        <div class="container">
            <div class="breadcrumb">
                <a href="../index.html">Home</a>
                <i class="fas fa-chevron-right"></i>
                <a href="#">Axion Black Market</a>
                <i class="fas fa-chevron-right"></i>
                <span>Server</span>
            </div>
            <h1><i class="fas fa-store"></i> Axion Black Market - Server Customization</h1>
            <p>Learn how to customize Axion Black Market with server-side modifications</p>
        </div>
    </section>

    <!-- Server Content -->
    <section class="server-content">
        <div class="container">
            <!-- Overview -->
            <div class="server-section">
                <h2><i class="fas fa-server"></i> Server-Side Overview</h2>
                <p>Axion Black Market provides a <code>shared/server.lua</code> file that allows you to add custom server-side functionality. This file is designed to be easily customizable without modifying the core script files.</p>
                
                <div class="info-box">
                    <div class="info-icon">
                        <i class="fas fa-info-circle"></i>
                    </div>
                    <div class="info-content">
                        <h3>Important Note</h3>
                        <p>The <code>shared/server.lua</code> file is loaded after the main server files, allowing you to override or extend existing functionality without breaking updates.</p>
                    </div>
                </div>
            </div>

            <!-- File Structure -->
            <div class="server-section">
                <h2><i class="fas fa-folder-tree"></i> File Structure</h2>
                <div class="file-structure">
                    <div class="code-block">
                        <pre><code>axion-blackmarket/
├── server/
│   ├── server.lua          # Main server file (DO NOT EDIT)
│   └── shared/
│       └── server.lua      # Your custom server code (EDIT THIS)
├── client/
├── config.lua
└── fxmanifest.lua</code></pre>
                    </div>
                </div>
            </div>

            <!-- Custom Purchase Validation -->
            <div class="server-section">
                <h2><i class="fas fa-shield-alt"></i> Custom Purchase Validation</h2>
                <p>Add custom validation logic for purchases:</p>
                
                <div class="code-example">
                    <h3>Example: Advanced Purchase Validation</h3>
                    <div class="code-block">
                        <pre><code>-- axion-blackmarket/server/shared/server.lua

-- Custom purchase validation
RegisterNetEvent('axion-blackmarket:purchaseItem')
AddEventHandler('axion-blackmarket:purchaseItem', function(itemData, quantity, paymentType)
    local source = source
    local playerId = GetPlayerIdentifier(source, 0)
    
    -- Check if player is banned from black market
    if IsPlayerBanned(source) then
        TriggerClientEvent('axion-blackmarket:notifyPlayer', source, 'You are banned from the black market!', 'error', 5000)
        return
    end
    
    -- Check purchase cooldown
    if HasPurchaseCooldown(source) then
        TriggerClientEvent('axion-blackmarket:notifyPlayer', source, 'You must wait before making another purchase!', 'error', 3000)
        return
    end
    
    -- Check if item is restricted for this player
    if IsItemRestricted(source, itemData.name) then
        TriggerClientEvent('axion-blackmarket:notifyPlayer', source, 'This item is restricted for you!', 'error', 5000)
        return
    end
    
    -- Log the purchase attempt
    LogPurchaseAttempt(source, itemData, quantity, paymentType)
    
    -- Proceed with normal purchase validation
    TriggerEvent('axion-blackmarket:processPurchase', source, itemData, quantity, paymentType)
end)

-- Helper functions
function IsPlayerBanned(source)
    local playerId = GetPlayerIdentifier(source, 0)
    return Config.BannedPlayers[playerId] or false
end

function HasPurchaseCooldown(source)
    local playerId = GetPlayerIdentifier(source, 0)
    local lastPurchase = Config.PlayerCooldowns[playerId]
    
    if lastPurchase then
        local timeSinceLastPurchase = GetGameTimer() - lastPurchase
        return timeSinceLastPurchase < Config.PurchaseCooldown
    end
    
    return false
end</code></pre>
                    </div>
                </div>
            </div>

            <!-- Custom Admin Commands -->
            <div class="server-section">
                <h2><i class="fas fa-crown"></i> Custom Admin Commands</h2>
                <p>Add custom admin commands and management tools:</p>
                
                <div class="code-example">
                    <h3>Example: Advanced Admin Commands</h3>
                    <div class="code-block">
                        <pre><code>-- axion-blackmarket/server/shared/server.lua

-- Custom admin commands
RegisterCommand('blackmarket_ban', function(source, args, rawCommand)
    if not IsPlayerAdmin(source) then
        TriggerClientEvent('axion-blackmarket:notifyPlayer', source, 'You do not have permission to use this command!', 'error', 5000)
        return
    end
    
    if #args < 1 then
        TriggerClientEvent('axion-blackmarket:notifyPlayer', source, 'Usage: /blackmarket_ban [player_id]', 'error', 5000)
        return
    end
    
    local targetId = tonumber(args[1])
    local targetPlayer = GetPlayerName(targetId)
    
    if not targetPlayer then
        TriggerClientEvent('axion-blackmarket:notifyPlayer', source, 'Player not found!', 'error', 5000)
        return
    end
    
    local playerId = GetPlayerIdentifier(targetId, 0)
    Config.BannedPlayers[playerId] = true
    
    TriggerClientEvent('axion-blackmarket:notifyPlayer', source, 'Player ' .. targetPlayer .. ' has been banned from the black market!', 'success', 5000)
    TriggerClientEvent('axion-blackmarket:notifyPlayer', targetId, 'You have been banned from the black market!', 'error', 10000)
end, false)

-- Helper function to check admin status
function IsPlayerAdmin(source)
    local playerId = GetPlayerIdentifier(source, 0)
    return Config.Admins[playerId] or false
end</code></pre>
                    </div>
                </div>
            </div>

            <!-- Best Practices -->
            <div class="server-section">
                <h2><i class="fas fa-star"></i> Best Practices</h2>
                
                <div class="best-practices">
                    <div class="practice-card">
                        <div class="practice-icon">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <h3>Security</h3>
                        <ul>
                            <li>Always validate player permissions before allowing actions</li>
                            <li>Use server-side validation for all transactions</li>
                            <li>Implement proper rate limiting and cooldowns</li>
                            <li>Log all important actions for security auditing</li>
                        </ul>
                    </div>
                    <div class="practice-card">
                        <div class="practice-icon">
                            <i class="fas fa-database"></i>
                        </div>
                        <h3>Data Management</h3>
                        <ul>
                            <li>Use proper database queries with error handling</li>
                            <li>Implement data caching to reduce database load</li>
                            <li>Clean up old data regularly to prevent bloat</li>
                            <li>Backup important data before major changes</li>
                        </ul>
                    </div>
                    <div class="practice-card">
                        <div class="practice-icon">
                            <i class="fas fa-tachometer-alt"></i>
                        </div>
                        <h3>Performance</h3>
                        <ul>
                            <li>Avoid expensive operations in loops</li>
                            <li>Use appropriate wait times in threads</li>
                            <li>Implement proper error handling to prevent crashes</li>
                            <li>Monitor resource usage and optimize as needed</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Axion Scripts</h3>
                    <p>Professional FiveM resources for modern servers</p>
                    <div class="social-links">
                        <a href="#" class="social-link">
                            <i class="fab fa-discord"></i>
                        </a>
                        <a href="#" class="social-link">
                            <i class="fab fa-github"></i>
                        </a>
                        <a href="#" class="social-link">
                            <i class="fab fa-twitter"></i>
                        </a>
                    </div>
                </div>
                <div class="footer-section">
                    <h4>Scripts</h4>
                    <ul>
                        <li><a href="../index.html#scripts">Axion Black Market</a></li>
                        <li><a href="../index.html#scripts">Axion Notify</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Documentation</h4>
                    <ul>
                        <li><a href="installation.html">Installation</a></li>
                        <li><a href="usage.html">Usage</a></li>
                        <li><a href="client.html">Client</a></li>
                        <li><a href="server.html">Server</a></li>
                        <li><a href="faq.html">FAQ</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Support</h4>
                    <ul>
                        <li><a href="faq.html">Troubleshooting</a></li>
                        <li><a href="#">Discord</a></li>
                        <li><a href="#">GitHub Issues</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Axion Development. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Load component system -->
    <script src="../components/component-loader.js"></script>
    <script src="../script.js"></script>
</body>
</html>
